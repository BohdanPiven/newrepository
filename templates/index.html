<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Ranges - Panel G\uc0\u322 \'f3wny</title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.65">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
    span.s2 {font: 12.0px 'Apple Color Emoji'; font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="pl"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;Ranges - Panel Główny&lt;/title&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Dodanie favicon --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Opcjonalnie: Dodatkowe formaty favicon --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link href="https://fonts.googleapis.com/css2?family=Quantico&amp;display=swap" rel="stylesheet"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Stylizacja panelu głównego */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>body {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-family: 'Quantico', sans-serif;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #141414; /* Neon dark background */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #39FF14; /* Neon green text */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-image: url("{{ url_for('static', filename='greek_key.png') }}"); /* Grecki wzór klucza */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-repeat: repeat;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-size: 50px 50px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: relative; /* Dodane dla pozycjonowania user-info */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>max-width: 1200px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 0 auto;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(26, 26, 26, 0.9); /* Semi-transparent background */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 20px rgba(57, 255, 20, 0.5); /* Neon glow */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: relative;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>h1 {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-bottom: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #FFD700; /* Złoty kolor neonowy */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-shadow: 0 0 10px #FFD700, 0 0 20px #FFD700, 0 0 30px #FFD700;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.user-info {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>top: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>right: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>p.welcome {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>form {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(42, 42, 42, 0.9);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 20px rgba(57, 255, 20, 0.5); /* Neon glow */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-bottom: 30px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>label {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: block;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-weight: bold;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>input[type="text"], input[type="email"], input[type="password"], textarea, select, input[type="file"] {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 100%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: 1px solid #333333;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-sizing: border-box;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 16px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #333333; /* Dark input backgrounds */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: border-color 0.3s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>input[type="text"]:focus, input[type="email"]:focus, input[type="password"]:focus, textarea:focus, select:focus, input[type="file"]:focus {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>outline: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-color: #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 0 5px #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>button {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #1a1a1a;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 10px 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 16px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s, transform 0.2s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 20px rgba(57, 255, 20, 0.5); /* Neon glow */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>button:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #28a745;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(1.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 8px 30px rgba(40, 167, 69, 0.5);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>button:active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(0.95);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.flash-message {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(31, 143, 241, 0.8);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #1a1a1a;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 10px 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 2px 10px rgba(57, 255, 20, 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.flash-message.error {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(255, 77, 77, 0.8);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #1a1a1a;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.flash-message.success {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(40, 167, 69, 0.8);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #1a1a1a;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.flash-message.warning {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(255, 193, 7, 0.8);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #1a1a1a;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>a {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-decoration: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>a:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-decoration: underline;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment-list, .email-list {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment-list {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: none; /* Segment list is collapsed by default */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment-list.show {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: block;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(42, 42, 42, 0.9);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-bottom: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: space-between;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-left: 5px solid rgba(57, 255, 20, 0.7); /* More transparent border */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s ease;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(58, 58, 58, 0.9);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment input[type="checkbox"] {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-right: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(1.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment-title {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-weight: bold;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>white-space: nowrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>overflow: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-overflow: ellipsis;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-grow: 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment-count {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: small;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #FFD700;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-left: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.checkbox-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 5px 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.checkbox-container label {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-left: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-grow: 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>white-space: nowrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>overflow: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-overflow: ellipsis;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #FFFFFF;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.checkbox-btn-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: flex-end;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gap: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment-list.show .checkbox-btn-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.email-list {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: none; /* Email lists are collapsed by default */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding-left: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(26, 26, 26, 0.9);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-bottom: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 2px 10px rgba(57, 255, 20, 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.email-list.show {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: block;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.button-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: right;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: relative;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.button-container .spinner {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>right: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>top: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: translateY(-50%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.spinner {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: none; /* Hide all spinners by default */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: 4px solid #f3f3f3;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-top: 4px solid #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>height: 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>animation: spin 1s linear infinite;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>@keyframes spin {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>0% { transform: rotate(0deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>100% { transform: rotate(360deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.note-section {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(26, 26, 26, 0.9);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: 1px solid #333333;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 30px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 20px rgba(57, 255, 20, 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.note {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(42, 42, 42, 0.9);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 5px 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: space-between;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 2px 10px rgba(57, 255, 20, 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.note form {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.note button {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #ff4d4d;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #1a1a1a;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 5px 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s, transform 0.2s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.note button:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #e60000;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(1.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.note button:active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(0.95);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.delete-all-notes-form button {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #ff4d4d;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #1a1a1a;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 10px 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s, transform 0.2s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.delete-all-notes-form button:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #e60000;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(1.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.delete-all-notes-form button:active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(0.95);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Image button style */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.toggle-segments-btn {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-bottom: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.toggle-segments-btn img {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 32px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>height: 32px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.toggle-segments-btn img:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(1.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: transform 0.2s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Separator line between segments */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.segment-separator {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-top: 1px solid rgba(57, 255, 20, 0.3); /* More transparent */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 10px 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>@media (max-width: 600px) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.segment, .email-list, .note {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>padding: 8px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>button, input, textarea, select, input[type="file"] {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>font-size: 14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>padding: 8px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.toggle-segments-btn img {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>width: 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>height: 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Drag and Drop Area */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.dropzone {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: 2px dashed #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: background-color 0.3s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.dropzone.dragover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(51, 51, 51, 0.9);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Footer */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.footer {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #888888;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Stylizacja przycisków usuwania załączników */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.attachment-item button {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #ff4d4d;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 16px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>line-height: 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-left: auto;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.attachment-item button:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #e60000;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Nowa sekcja do wyświetlania załączników */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.attachments-preview {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-wrap: wrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gap: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.attachment-item {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: rgba(42, 42, 42, 0.9);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: 1px solid #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 5px 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #FFFFFF;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>max-width: 150px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>overflow: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-overflow: ellipsis;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>white-space: nowrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.attachment-item span {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-right: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Licznik załączników */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.attachments-count {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-top: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #FFD700;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>/* Spinner */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.spinner {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: none; /* Hide all spinners by default */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: 4px solid #f3f3f3;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-top: 4px solid #39FF14;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>height: 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>animation: spin 1s linear infinite;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>@keyframes spin {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>0% { transform: rotate(0deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>100% { transform: rotate(360deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const MAX_ATTACHMENTS = {{ max_attachments }};</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function toggleEmailList(segmentId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var content = document.getElementById(segmentId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>content.classList.toggle('show');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function toggleSegmentList() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var segmentList = document.getElementById('segment-container');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>segmentList.classList.toggle('show');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function toggleSelectAllCheckboxes(button, containerId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var container = document.getElementById(containerId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var checkboxes = container.querySelectorAll('input[type="checkbox"]');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var allChecked = true;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Check if all checkboxes are checked</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>for (var i = 0; i &lt; checkboxes.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!checkboxes[i].checked) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>allChecked = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Toggle the checkboxes</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var newCheckedStatus = !allChecked;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>for (var i = 0; i &lt; checkboxes.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>checkboxes[i].checked = newCheckedStatus;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Update button text</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (newCheckedStatus) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>button.textContent = (containerId === 'segment-container') ? 'Odznacz wszystkie segmenty' : 'Odznacz wszystkie';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>button.textContent = (containerId === 'segment-container') ? 'Zaznacz wszystkie segmenty' : 'Zaznacz wszystkie';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function onSegmentCheckboxChange(segmentIndex) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var segmentCheckbox = document.getElementById('segment-' + segmentIndex);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var emailList = document.getElementById('emails-' + segmentIndex);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var emailCheckboxes = emailList.querySelectorAll('input[type="checkbox"]');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var toggleButton = emailList.querySelector('.checkbox-btn-container button');</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>for (var i = 0; i &lt; emailCheckboxes.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>emailCheckboxes[i].checked = segmentCheckbox.checked;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Update toggle button label</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (segmentCheckbox.checked) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>toggleButton.textContent = 'Odznacz wszystkie';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>toggleButton.textContent = 'Zaznacz wszystkie';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function onEmailCheckboxChange(segmentIndex) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var emailList = document.getElementById('emails-' + segmentIndex);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var emailCheckboxes = emailList.querySelectorAll('input[type="checkbox"]');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var segmentCheckbox = document.getElementById('segment-' + segmentIndex);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var allChecked = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var toggleButton = emailList.querySelector('.checkbox-btn-container button');</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>for (var i = 0; i &lt; emailCheckboxes.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!emailCheckboxes[i].checked) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>allChecked = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>segmentCheckbox.checked = allChecked;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Update toggle button label</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (allChecked) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>toggleButton.textContent = 'Odznacz wszystkie';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>toggleButton.textContent = 'Zaznacz wszystkie';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function showSpinner(spinnerId, buttonId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(spinnerId).style.display = 'inline-block';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (buttonId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(buttonId).disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function hideSpinner(spinnerId, buttonId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(spinnerId).style.display = 'none';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (buttonId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(buttonId).disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>// Drag and Drop for File Attachments</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var dropzone = document.getElementById('dropzone');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var fileInput = document.getElementById('attachments');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var attachmentsPreview = document.getElementById('attachments-preview');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var attachmentsCount = document.getElementById('attachments-count');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>var allFiles = []; // Array to hold all selected files</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Event listeners for drag and drop</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>dropzone.addEventListener('dragover', function(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dropzone.classList.add('dragover');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>dropzone.addEventListener('dragleave', function(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dropzone.classList.remove('dragover');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>dropzone.addEventListener('drop', function(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dropzone.classList.remove('dragover');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (e.dataTransfer.files.length) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>appendFiles(e.dataTransfer.files);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>dropzone.addEventListener('click', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>fileInput.click();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Event listener for file input change</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>fileInput.addEventListener('change', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>appendFiles(fileInput.files);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function isFileInList(file, fileList) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (var i = 0; i &lt; fileList.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (file.name === fileList[i].name &amp;&amp; file.size === fileList[i].size &amp;&amp; file.type === fileList[i].type) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>return true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function appendFiles(files) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (var i = 0; i &lt; files.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var file = files[i];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (!isFileInList(file, allFiles)) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (allFiles.length &lt; MAX_ATTACHMENTS) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>allFiles.push(file);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>alert(`Możesz przesłać maksymalnie ${MAX_ATTACHMENTS} załączników.`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>alert(`Plik ${file.name} już został dodany.`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Update the file input</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var dataTransfer = new DataTransfer();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (var i = 0; i &lt; allFiles.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>dataTransfer.items.add(allFiles[i]);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>fileInput.files = dataTransfer.files;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Update the attachments preview and count</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateAttachmentsPreview();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateAttachmentsCount(allFiles.length);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function updateAttachmentsPreview() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>attachmentsPreview.innerHTML = ''; // Clear existing previews</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (var i = 0; i &lt; allFiles.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var file = allFiles[i];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var fileName = file.name;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (fileName.length &gt; 15) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>fileName = fileName.substring(0, 12) + '...';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var attachmentItem = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>attachmentItem.classList.add('attachment-item');</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var fileIcon = document.createElement('span');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>fileIcon.textContent = '</span><span class="s2">📎</span><span class="s1">'; // Paperclip icon</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>attachmentItem.appendChild(fileIcon);</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var fileNameSpan = document.createElement('span');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>fileNameSpan.textContent = fileName;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>attachmentItem.appendChild(fileNameSpan);</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>var removeButton = document.createElement('button');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>removeButton.type = 'button';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>removeButton.innerHTML = '&amp;times;'; // '×' symbol</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>removeButton.dataset.index = i;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>removeButton.addEventListener('click', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>removeFile(this.dataset.index);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>attachmentItem.appendChild(removeButton);</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>attachmentsPreview.appendChild(attachmentItem);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function removeFile(index) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>allFiles.splice(index, 1);</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Update the file input</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>var dataTransfer = new DataTransfer();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (var i = 0; i &lt; allFiles.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>dataTransfer.items.add(allFiles[i]);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>fileInput.files = dataTransfer.files;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateAttachmentsPreview();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateAttachmentsCount(allFiles.length);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function updateAttachmentsCount(count) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>attachmentsCount.textContent = `Załączników: ${count}/${MAX_ATTACHMENTS}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Initialize attachments count</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>updateAttachmentsCount(0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;h1&gt;Ranges&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="user-info"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="welcome"&gt;Witaj, {{ session['username'] }}! &lt;a href="{{ url_for('logout') }}"&gt;Wyloguj się&lt;/a&gt; | &lt;a href="{{ url_for('settings') }}"&gt;Ustawienia konta&lt;/a&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>{% with messages = get_flashed_messages(with_categories=true) %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{% if messages %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>{% for category, message in messages %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div class="flash-message {{ category }}"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>{{ message }}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>{% endfor %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>{% endif %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>{% endwith %}</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;form method="post" enctype="multipart/form-data" onsubmit="showSpinner('spinner', 'send-button')"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label&gt;Temat:&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="text" name="subject" required&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label&gt;Wiadomość:&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;textarea name="message" rows="5" required&gt;&lt;/textarea&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Przeniesiono przycisk "Wyślij" wyżej pod pole "Wiadomość" --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="button-container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button type="submit" id="send-button"&gt;Wyślij&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="spinner" id="spinner"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Pole załączników --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label&gt;Załączniki:&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="file" name="attachments" id="attachments" multiple style="display: none;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="dropzone" class="dropzone"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Przeciągnij i upuść pliki tutaj lub kliknij, aby wybrać.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Sekcja do wyświetlania podglądu załączników --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="attachments-preview" class="attachments-preview"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Licznik załączników --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="attachments-count" class="attachments-count"&gt;Załączników: 0/{{ max_attachments }}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;label&gt;Wybierz język:&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;select id="language" name="language" required&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;option value="Polski"&gt;Polski&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;option value="Zagraniczny"&gt;Zagraniczny&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h2&gt;Segmenty&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Image button --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button type="button" class="toggle-segments-btn" onclick="toggleSegmentList()"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;img src="{{ url_for('static', filename='hammer.png') }}" alt="Toggle Segments"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="segment-container" class="segment-list"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="checkbox-btn-container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button type="button" onclick="toggleSelectAllCheckboxes(this, 'segment-container')"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>Zaznacz wszystkie segmenty</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>{% for segment, counts in segments.items() %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>{% set segment_index = loop.index %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="segment" onclick="toggleEmailList('emails-{{ segment_index }}')"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;input type="checkbox" name="segments" value="{{ segment }}" class="segment-checkbox" id="segment-{{ segment_index }}" onclick="event.stopPropagation(); onSegmentCheckboxChange({{ segment_index }})"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="segment-{{ segment_index }}" class="segment-title" onclick="event.stopPropagation();"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>{{ segment }}:</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="segment-count"&gt;Polski: {{ counts['Polski'] }}, Zagraniczny: {{ counts['Zagraniczny'] }}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;hr class="segment-separator"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="email-list" id="emails-{{ segment_index }}"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="checkbox-btn-container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button type="button" onclick="toggleSelectAllCheckboxes(this, 'emails-{{ segment_index }}')"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>Odznacz wszystkie</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>{% set emails_polski = get_emails_for_segment(data, segment, "Polski") %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>{% set emails_zagraniczny = get_emails_for_segment(data, segment, "Zagraniczny") %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>{% for email in emails_polski %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="checkbox-container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;input type="checkbox" id="email-{{ segment_index }}-polski-{{ loop.index }}" class="email-checkbox-{{ segment_index }}" name="include_emails" value="{{ email }}" checked onchange="onEmailCheckboxChange({{ segment_index }})"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;label for="email-{{ segment_index }}-polski-{{ loop.index }}"&gt;{{ email }} (Polski)&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>{% endfor %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>{% for email in emails_zagraniczny %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="checkbox-container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;input type="checkbox" id="email-{{ segment_index }}-zagraniczny-{{ loop.index }}" class="email-checkbox-{{ segment_index }}" name="include_emails" value="{{ email }}" checked onchange="onEmailCheckboxChange({{ segment_index }})"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;label for="email-{{ segment_index }}-zagraniczny-{{ loop.index }}"&gt;{{ email }} (Zagraniczny)&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>{% endfor %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>{% endfor %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="note-section"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h3&gt;Notatki&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;form method="post" action="{{ url_for('add_note') }}" onsubmit="showSpinner('note-spinner')"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="text" name="note" placeholder="Dodaj notatkę..." required&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button type="submit"&gt;Dodaj notatkę&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="spinner" id="note-spinner"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;ul&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>{% for note in notes %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;li class="note"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span&gt;{{ note.content }}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;form method="post" action="{{ url_for('delete_note', index=note.id) }}"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button type="submit"&gt;Usuń&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/li&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>{% endfor %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/ul&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>{% if notes %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;form method="post" action="{{ url_for('delete_all_notes') }}" class="delete-all-notes-form"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button type="submit"&gt;Usuń wszystkie notatki&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>{% endif %}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- Zmodyfikowana stopka --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="footer"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&amp;copy; DigitDrago</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
